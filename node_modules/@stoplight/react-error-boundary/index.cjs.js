"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react=require("@sentry/react"),React=require("react");function __rest(r,e){var t={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.indexOf(o)<0&&(t[o]=r[o]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(r);n<o.length;n++)e.indexOf(o[n])<0&&(t[o[n]]=r[o[n]])}return t}const refreshPage=()=>{window.location.reload()},FallbackComponent=({className:r,tryRecovering:e})=>React.createElement("div",{className:r},React.createElement("h2",null,"Gah. The component just crashed"),React.createElement("p",null,"You can try reloading component or refresh the page."),React.createElement("button",{onClick:e,type:"button"},"Reload component"),React.createElement("button",{onClick:refreshPage,type:"button"},"Refresh page")),ErrorBoundaryContext=React.createContext({FallbackComponent:FallbackComponent}),ErrorBoundaryProvider=r=>{var{children:e}=r,t=__rest(r,["children"]);return React.createElement(ErrorBoundaryContext.Provider,{value:t},e)},wrapFallback=r=>e=>React.createElement(r,{error:e.error,componentStack:e.componentStack,tryRecovering:e.resetError});function usePrev(r){const e=React.useRef();return React.useEffect(()=>{e.current=r},[r]),e.current}const ErrorBoundary=r=>{const e=React.useContext(ErrorBoundaryContext),t=r.FallbackComponent||e.FallbackComponent||FallbackComponent,o=React.useMemo(()=>wrapFallback(t),[t]),n=React.useRef(null),a=usePrev(r);return React.useEffect(()=>{const e=n.current;if(e&&a&&e.state.error&&r.recoverableProps)for(const t of r.recoverableProps)a[t]!==r[t]&&e.resetErrorBoundary()},[r]),React.createElement(react.ErrorBoundary,{ref:n,showDialog:!1,fallback:o,onError:r.onError},r.children)},withErrorBoundary=(r,e)=>{const t=t=>React.createElement(ErrorBoundary,Object.assign(Object.assign({},e),t),React.createElement(r,t)),o=r.displayName||r.name;return t.displayName=o?`WithErrorBoundary(${o})`:"WithErrorBoundary",t};exports.ErrorBoundary=ErrorBoundary,exports.ErrorBoundaryContext=ErrorBoundaryContext,exports.ErrorBoundaryProvider=ErrorBoundaryProvider,exports.FallbackComponent=FallbackComponent,exports.withErrorBoundary=withErrorBoundary;
