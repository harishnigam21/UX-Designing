import{ErrorBoundary as r}from"@sentry/react";import{createElement as o,createContext as e,useContext as n,useMemo as t,useRef as a,useEffect as c}from"react";const l=()=>{window.location.reload()},s=({className:r,tryRecovering:e})=>o("div",{className:r},o("h2",null,"Gah. The component just crashed"),o("p",null,"You can try reloading component or refresh the page."),o("button",{onClick:e,type:"button"},"Reload component"),o("button",{onClick:l,type:"button"},"Refresh page")),i=e({FallbackComponent:s}),p=r=>{var{children:e}=r,n=function(r,o){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&o.indexOf(n)<0&&(e[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(n=Object.getOwnPropertySymbols(r);t<n.length;t++)o.indexOf(n[t])<0&&(e[n[t]]=r[n[t]])}return e}(r,["children"]);return o(i.Provider,{value:n},e)};const u=e=>{const l=n(i),p=e.FallbackComponent||l.FallbackComponent||s,u=t(()=>(r=>e=>o(r,{error:e.error,componentStack:e.componentStack,tryRecovering:e.resetError}))(p),[p]),m=a(null),y=function(r){const o=a();return c(()=>{o.current=r},[r]),o.current}(e);return c(()=>{const r=m.current;if(r&&y&&r.state.error&&e.recoverableProps)for(const o of e.recoverableProps)y[o]!==e[o]&&r.resetErrorBoundary()},[e]),o(r,{ref:m,showDialog:!1,fallback:u,onError:e.onError},e.children)},m=(r,e)=>{const n=n=>o(u,Object.assign(Object.assign({},e),n),o(r,n)),t=r.displayName||r.name;return n.displayName=t?`WithErrorBoundary(${t})`:"WithErrorBoundary",n};export{u as ErrorBoundary,i as ErrorBoundaryContext,p as ErrorBoundaryProvider,s as FallbackComponent,m as withErrorBoundary};
